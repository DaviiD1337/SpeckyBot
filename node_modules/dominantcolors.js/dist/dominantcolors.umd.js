!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.dominantcolorsJs=n()}(this,function(){function t(t){return Math.round(t).toString(16).toUpperCase().padStart(2,"0")}function n(t,n){return{redData:t[4*n],greenData:t[4*n+1],blueData:t[4*n+2]}}var e=0,r=255,a=function(t){this.getColorRange=o,this.getVolume=i,this.data=t,this.total=t.length/4,this.colorRange=this.getColorRange(t),this.rank=this.getVolume(this.colorRange)*this.total};function o(t){for(var a=t.length/4,o=r,i=e,u=r,c=e,h=r,d=e,s=0;s<a;s+=1){var l=n(t,s),m=l.redData,f=l.greenData,g=l.blueData;o=m<o?m:o,i=m>i?m:i,u=f<u?m:u,c=f>c?m:c,h=g<h?m:h,d=g>d?m:d}return{red:{min:o,max:i},green:{min:u,max:c},blue:{min:h,max:d}}}function i(t){var n=t.red,e=t.green,r=t.blue;return(n.max-n.min)*(e.max-e.min)*(r.max-r.min)}function u(t){for(var n,e,r,o,i,u,c,h=(i=[(e=(n=t.colorRange).red).max-e.min,(r=n.green).max-r.min,(o=n.blue).max-o.min],u=Math.max.apply(Math,i),i.indexOf(u)),d=function(t,n){for(var e,r={},a=[],o=0,i=0,u=0;u<t.total;u+=1)r[e=t.data[4*u+n]]?r[e]+=1:r[e]=1;for(var c in r)0!==(e=parseInt(c,10))&&a.push({color:e,count:r[c]});a.sort(function(t,n){return t.count-n.count});for(var h=0;h<a.length;h+=1)if((o+=a[h].count)>=t.total/2||h===a.length-1){i=h;break}return a[i].color}(t,h),s=[],l=[],m=0;m<t.total;m+=1)(c=t.data[4*m+h]<d?s:t.data[4*m+h]>d?l:s.length<l.length?s:l).push(t.data[4*m]),c.push(t.data[4*m+1]),c.push(t.data[4*m+2]),c.push(t.data[4*m+3]);return[new a(s),new a(l)]}var c={count:4,colorFormat:"hex",omitTransparentPixel:!0,method:"medianCut"};return function(e,r){void 0===r&&(r=c);try{function o(){var o=(r=Object.assign(c,r)).count,i=r.colorFormat,h=r.method;if(r.omitTransparentPixel){var d=e;e=[];for(var s=0;s<d.length/4;s+=1)d[4*s+3]&&(e.push(d[4*s]),e.push(d[4*s+1]),e.push(d[4*s+2]),e.push(d[4*s+3]))}return("medianCut"===h?function(t,n){void 0===n&&(n=1);for(var e=new a(t),r=[e];r.length<n;){r.sort(function(t,n){return t.rank-n.rank});var o=u(e=r.pop());r=r.concat(o)}return r}:function(){return[]})(e,o).slice(0,o).map(function(e){return function(e,r){void 0===r&&(r="hex");for(var a=e.length/4,o=0,i=0,u=0,c=0;c<a;c+=1){var h=n(e,c);o+=h.redData,i+=h.greenData,u+=h.blueData}return o/=a,i/=a,u/=a,"rgb"===r?{red:Math.round(o),green:Math.round(i),blue:Math.round(u)}:"hex"===r?"#"+t(o)+t(i)+t(u):void 0}(e.data,i)})}var i=function(){if("string"==typeof e)return Promise.resolve(function(t){try{return Promise.resolve(new Promise(function(n,e){var r=new Image;r.src=t,r.onload=function(){var t=r.width,e=r.height,a=document.createElement("canvas");a.setAttribute("width",String(t)),a.setAttribute("width",String(e));var o=a.getContext("2d");o.drawImage(r,0,0,t,e);var i=o.getImageData(0,0,t,e);n(i.data)},r.onerror=r.onabort=function(){e(new Error("Load image failed, please try again."))}}))}catch(t){return Promise.reject(t)}}(e)).then(function(t){e=t})}();return Promise.resolve(i&&i.then?i.then(o):o())}catch(t){return Promise.reject(t)}}});
//# sourceMappingURL=dominantcolors.umd.js.map
